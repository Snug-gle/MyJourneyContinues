[[RealMySQL 8.0]]
9.3 고급 최적화
- MySQL 서버의 옵티마이저가 실행 계획을 수립할 때 통계정보와 옵티마이저의 옵션을  결합해서 최적의 실행 계획을 수립.
9.3.1 옵티마이저 스위치 옵션 `optimizer_switch`
9.3.1.1 MRR과 배치 키 액세스
- Multi-Range Read
- MySQL 서버의 내부 구조상 조인 처리는 MySQL 엔진이 처리
- 실제 레코드를 검색하고 읽는 부분은 스토리지 엔진이 담당
- 네스티드 루프 조인 시, 스토리지 엔진에서는 아무런 최적화를 수행할 수 없는 단점이 발생
- 위의 단점을 보완하기 위해 MySQL에서는 버퍼링을 사용
- 조인 시, 즉시 하지 않고 조인 대상을 버퍼링 함
- 레코드가 가득차면 비로소 MySQL 엔진은 버퍼링된 레코드를 스토리지 엔진으로 한 번에 요청
---
- gpt
MRR은 다음과 같은 방식으로 작동합니다:

1. **인덱스 스캔**: 먼저 쿼리의 조건에 맞는 인덱스를 스캔하여, 필요한 모든 인덱스 포인터(키와 실제 레코드의 포인터)를 수집합니다.
2. **버퍼링**: 수집된 인덱스 포인터를 순서에 관계없이 버퍼에 저장합니다.
3. **정렬**: 버퍼링된 인덱스 포인터를 실제 레코드의 저장 위치에 따라 정렬합니다. 이렇게 하면 물리적인 저장 순서에 따라 데이터를 읽을 수 있으므로 디스크 I/O를 최적화할 수 있습니다.
4. **데이터 액세스**: 정렬된 포인터에 따라 실제 데이터 레코드를 읽습니다. 이 과정에서 디스크로의 접근이 순차적으로 이루어지므로 I/O 비용이 감소합니다.
---
9.3.1.2 블록 네스티드 루프 조인(block_nested_loop)
- 