### 1.  프로젝트 소개
- 테니스 코트 예약 애플리케이션
- 예약과 함께 필요시 매칭도 진행한다. 

### 2. 도메인

- **테니스장 예약 도메인**: `RallyPoint-Court
	- 주요 엔티티: `TennisCourt`, `Reservation`, `Schedule`
	- 주요 기능: 예약 확인, 예약 변경, 예약 취소
- **중고 직거래 서비스 도메인**: RallyPoint-Market`
	- 주요 엔티티: `Product`
	- 주요 기능: 상품 등록, 상품 조회, 거래 진행, 거래 이력 관리
- **매칭 서비스 도메인**: RallyPoint-Match`
	- 주요 엔티티: `Match`, GameType` (단식, 복식)
	- 주요 기능: 플레이어 매칭, 경기 유형 선택, 매칭 결과 저장(이벤트 대회 시에만)
- **회원 관리 도메인**: RallyPoint-User
	- 주요 엔티티: `User`, `Role`, `Authority`
	- 주요 기능: 사용자 등록, 로그인, 권한 관리, 사용자 정보 수정
	- 기타: admin, member, court_manager
- 공지사항 도메인: RallyPoint-Notice

### 3. stack
- MSA 아키텍쳐 
- Spring boot
- java 21, cotlin
- open feign
- webflux

### 4. init 정보
- gradle - kotlin

### 5. 개발 약속
- 요구사항 -> issue -> branch 생성
	- ex. 회원 가입
		- 이슈: 회원 가입 API
		- 브랜치 생성

### 6. 기능 요약
- 회원
	- 가입
	- 회원 정보 수정
- 로그인
	- 일반 로그인
	- OAuth2 로그인
	- jwt 인증
- 예약
	- 예약 현황 리스트
	- 예약 신청

---

### **1. Redis 활용 방안**

#### **a. 캐싱**

- **예약 조회 속도 향상**: 사용자가 테니스 코트 예약 현황을 자주 조회하는 경우, 예약 정보를 Redis에 캐싱하여 빠르게 제공.
    - **예시**:
        - 키: `court:{courtId}:reservations`
        - 값: 해당 코트의 예약 리스트 (JSON 형식).
- 실시간 예약 현황을 자주 갱신해야 하는 경우에도 적합.

#### **b. 세션 관리**

- **로그인 세션 관리**: Redis를 세션 저장소로 활용하여 사용자 인증 상태를 유지.
    - Redis는 빠르고, 만료 시간 설정을 통해 세션 자동 정리가 가능.

#### **c. 분산 락**

- **중복 예약 방지**: 여러 사용자가 동시에 동일한 시간대에 코트를 예약하려고 할 때, Redis의 `SETNX` 또는 `Redisson`을 이용한 분산 락으로 중복 처리를 방지.

#### **d. 실시간 데이터 관리**

- **대기열 관리**: 예약이 가득 찬 경우, Redis의 `LIST` 자료구조를 사용해 대기열 구현.
    - 예약 취소 시 대기열 사용자에게 알림 제공.

---

### **2. Kafka 활용 방안**

#### **a. 예약 이벤트 스트리밍**

- **예약 데이터 스트리밍**: 사용자가 예약/취소/변경 시 Kafka를 통해 이벤트를 생성하고, 이를 처리하는 비동기 파이프라인 구축.
    - **예시**:
        - 토픽: `reservation-created`, `reservation-cancelled`
        - 데이터: 예약 ID, 사용자 ID, 시간, 코트 정보.

#### **b. 알림 시스템**

- **실시간 알림 처리**: Kafka를 통해 예약 생성/변경 이벤트를 알림 시스템에 전달.
    - 예: SMS, 이메일, 푸시 알림 등.

#### **c. 분석 데이터 파이프라인**

- **사용자 행동 분석**: 예약 관련 이벤트를 Kafka로 수집하고, 이를 데이터 레이크 또는 분석 시스템(Hadoop, Spark 등)으로 전달.
    - 예약 패턴 분석 및 혼잡 시간대 파악 가능.

#### **d. 분산 시스템 통합**

- 여러 서비스(예: 예약 서비스, 알림 서비스, 결제 서비스) 간 이벤트 전달을 Kafka로 처리하여 느슨한 결합 구현.

---

### **3. Spring Batch 활용 방안**

#### **a. 예약 상태 일괄 처리**

- **예약 만료 처리**: 예약 시간이 지나고도 사용자가 체크인하지 않은 예약을 주기적으로 정리.
    - 예약 상태를 "만료됨"으로 변경하는 배치 작업.

#### **b. 보고서 생성**

- **예약 데이터 보고서**: 하루, 주, 월 단위로 예약 데이터를 수집하여 관리자용 보고서를 생성.
    - 출력 형식: PDF, Excel 등.

#### **c. 예약 대기열 관리**

- 예약 취소 등으로 발생한 공석을 대기열 사용자에게 배정하는 일괄 처리.

#### **d. 데이터 아카이빙**

- **예약 데이터 백업**: 일정 기간 이상 지난 예약 데이터를 아카이빙 시스템으로 이전.

---

### **통합 시나리오**

이 세 가지 기술을 함께 사용하는 통합 시나리오:

1. **Redis로 실시간 조회와 상태 관리**: 예약 현황 캐싱 및 대기열 관리.
2. **Kafka로 이벤트 기반 비동기 처리**: 예약 생성/취소 시 알림 시스템과 분석 시스템으로 이벤트 전달.
3. **Spring Batch로 정기 처리**: 만료된 예약 정리, 예약 패턴 보고서 생성.

---

### **예시 아키텍처**

1. **사용자 요청**
    - 예약 현황 조회: Redis에서 조회.
    - 예약 생성/취소: Kafka에 이벤트 발행.
2. **실시간 알림**
    - Kafka 이벤트 소비자가 알림 서비스로 전달.
3. **배치 작업**
    - Spring Batch로 만료 예약 정리 및 보고서 생성.